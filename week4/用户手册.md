
# 用户手册

## 1. 购物车模块

### 1.1 用途

#### 1.1.1 功能
- 添加图书到购物车
- 查看购物车商品列表
- 修改购物项数量
- 删除单个购物项
- 清空整个购物车
- 实时计算总金额和总数量

#### 1.1.2 性能

**精度**
- 金额计算精确到小数点后两位
- 数量限制为整数，最小值为1
- 库存校验确保购买数量不超过库存上限

**时间特性**
- 购物车数据加载响应时间 < 2秒
- 数量修改操作响应时间 < 1秒
- 删除操作响应时间 < 1秒

**灵活性**
- 支持多设备购物车数据同步
- 支持批量操作和单个商品操作
- 自动适配不同屏幕尺寸

#### 1.1.3 安全保密
- 用户登录验证机制
- 购物车数据用户隔离
- 敏感操作需要确认提示
- 数据传输加密

### 1.2 使用过程

#### 1.2.1 安装与初始化
1. 确保数据库中存在carts表和cart_items表
2. 初始化用户购物车数据
3. 配置购物车相关路由和权限

#### 1.2.2 使用流程和操作步骤

**添加商品到购物车**
1. 在图书详情页点击"加入购物车"
2. 系统验证用户登录状态
3. 成功添加后显示提示信息

**查看购物车**
1. 点击导航栏"购物车"图标
2. 系统加载购物车数据和所有购物项
3. 显示商品列表、数量、单价和小计

**修改商品数量**
1. 点击购物项数量的"+"或"-"按钮
2. 或在输入框中直接输入数量
3. 系统实时校验库存并更新金额

**删除购物项**
1. 点击购物项右侧"删除"按钮
2. 确认删除操作
3. 系统移除商品并更新总金额

**清空购物车**
1. 点击"清空购物车"按钮
2. 确认清空操作
3. 系统删除所有购物项

#### 1.2.3 出错处理和恢复

**常见错误及解决方案**
- 网络超时：显示重试按钮，用户可手动刷新
- 库存不足：自动调整数量，提示用户
- 数据异常：清除本地缓存，重新加载
- 权限错误：跳转到登录页面

## 2. 订单管理模块

### 2.1 用途

#### 2.1.1 功能
- 创建新订单
- 查看订单列表
- 订单状态管理
- 订单发货处理
- 订单详情查看
- 订单状态筛选和分页

#### 2.1.2 性能

**精度**
- 订单金额精确到分
- 时间记录精确到秒
- 状态变更记录完整

**时间特性**
- 订单列表加载时间 < 3秒
- 状态更新操作 < 2秒
- 分页切换响应 < 1秒

**灵活性**
- 支持多种订单状态筛选
- 可配置每页显示数量
- 支持批量发货操作

#### 2.1.3 安全保密
- 管理员权限验证
- 敏感操作日志记录
- 订单数据访问控制
- 用户隐私信息保护

### 2.2 使用过程

#### 2.2.1 安装与初始化
1. 创建orders订单表
2. 初始化管理员账户和权限
3. 配置订单状态枚举值

#### 2.2.2 使用流程和操作步骤

**管理员登录**
1. 访问管理员订单管理页面
2. 系统验证管理员权限
3. 权限通过后进入管理界面

**查看订单列表**
1. 系统默认加载所有订单
2. 支持按状态筛选订单
3. 分页显示订单信息

**订单发货**
1. 点击"待发货"订单的"发货"按钮
2. 填写物流公司和运单号
3. 确认发货，更新订单状态

**查看订单详情**
1. 点击订单的"查看详情"按钮
2. 系统显示完整订单信息
3. 包含商品明细、收货信息等

**订单状态筛选**
1. 点击顶部状态筛选栏
2. 选择目标订单状态
3. 系统刷新对应订单列表

#### 2.2.3 出错处理和恢复

**常见错误及解决方案**
- 权限不足：重新登录管理员账户
- 订单不存在：刷新列表或检查订单ID
- 状态冲突：刷新订单数据
- 网络异常：检查连接后重试操作

## 3. 运行环境

### 3.1 硬件设备
- 服务器：2核CPU，4GB内存以上
- 存储空间：50GB以上可用空间
- 网络：100Mbps以上带宽

### 3.2 支持软件
- 操作系统：Linux/Windows Server
- 数据库：MySQL 5.7+
- Web服务器：Nginx/Apache
- 编程语言：Go 1.16+
- 依赖库：标准数据库驱动

### 3.3 数据结构

#### 核心数据表

**用户表 (users)**
- `ID`-用户标识 | `Username`-用户名 | `Password`-密码 | `Phone`-电话 | `Address`-地址

**图书表 (books)**
- `ID`-图书标识 | `Title`-书名 | `Author`-作者 | `Price`-价格 | `Stock`-库存 | `Sales`-销量

**购物车表 (carts)**
- `ID`-购物车ID | `UserID`-用户ID | `TotalCount`-总数量 | `TotalAmount`-总金额

**购物项表 (cart_items)**
- `ID`-购物项ID | `CartID`-购物车ID | `BookID`-图书ID | `Count`-数量 | `SubAmount`-小计

**订单表 (orders)**
- `ID`-订单ID | `OrderNo`-订单号 | `UserID`-用户ID | `TotalAmount`-总金额 | `Status`-状态

**订单项表 (order_items)**
- `ID`-订单项ID | `OrderID`-订单ID | `BookID`-图书ID | `Count`-数量 | `SubAmount`-小计

**会话表 (sessions)**
- `ID`-会话ID | `UserID`-用户ID | `ExpireTime`-过期时间

#### 数据关系
- 用户↔购物车(1:1) ↔ 购物项(1:N)
- 用户↔订单(1:N) ↔ 订单项(1:N)
- 图书↔购物项(1:N) ↔ 订单项(1:N)
