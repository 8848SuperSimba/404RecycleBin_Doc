
# 验收报告

## 首部

- **项目名称**: Go语言书城项目
- **项目标识**: GOBOOKSTORE-2025-001
- **版本**: V1.0

### 状态与版本信息

- **文件状态**: 草稿
- **文件标识**: SC-GOBOOKSTORE-V1.0-Userbook
- **当前版本**: V1.0
- **作者**:

    - **姓名**: 陈泓瑞
    - **学号**: 2022011153
    - **姓名**: 何祎凡
    - **学号**: 2022011145
    - **姓名**: 王炳祺
    - **学号**: 2022011146
    - **姓名**: 傅宇驰
    - **学号**: 2022011127

    - **团队**: 404回收站

- **完成日期**: 2025年10月23日

- **版本更新信息**: 首次创建

# 一、编号
**SC-OM-PRJ-2025**

# 二、项目阶段
**测试验收阶段**

# 三、项目经理
李泽雨

# 四、日期
-  **2025年10月23日**

# 五、项目进展情况

## 5.1 任务与进度

### 5.1.1 计划
1. **项目总体规划**  
   项目分五个阶段推进，各阶段任务按"基础支撑-核心功能-体验增强-质量保障-落地交付"逻辑递进，明确前后依赖关系（如数据库设计为后续功能开发提供数据基础，核心功能完成为优化测试提供对象），确保有序推进：

    - **第一阶段：基础搭建（第1周：9月7日-9月14日）**
        - 目录结构设计：  
          规划基于业务域的模块化目录体系，明确"表现层-业务层-数据层"三级划分，核心目录包含：
            - `controller`（接收前端请求）、`service`（业务逻辑处理）、`model`（数据模型定义）、
            - `dao`（数据访问接口）、`utils`（通用工具类）、`config`（系统配置）；  
              模块划分遵循"高内聚低耦合"原则，如用户模块独立于图书模块，通过接口交互。
        - 数据库设计：  
          基于业务需求设计关系型数据库结构，核心表及关键字段包括：
            - 用户表（user_id、username、password_hash、phone、email、create_time）、
            - 图书表（book_id、title、author、publisher、price、stock、category_id）、
            - 订单表（order_id、user_id、total_amount、status、pay_time、delivery_time）；  
              定义表间关系（如订单表与用户表为多对一、图书表与分类表为多对一），设置主键约束、唯一约束（如用户名、手机号）及外键关联。
        - 连接工具开发：  
          基于JDBC规范开发数据库连接池工具，集成HikariCP实现连接复用，封装基础操作方法：
            - 增删改查通用方法（如`insert(Object entity)`、`deleteById(Class<?> clazz, Long id)`）、
            - 批量操作方法（`batchUpdate(List<Object> entities)`）、
            - 事务管理方法（`beginTransaction()`、`commit()`、`rollback()`）；  
              要求连接池最大连接数配置为50，空闲超时时间300秒，确保高并发下资源稳定。

    - **第二阶段：核心功能开发（第2-4周：9月14日-9月21日）**
        - 用户登录/注册系统：  
          实现双渠道注册（邮箱+手机号），注册流程含：
            - 信息校验（手机号格式、邮箱合法性、密码强度≥8位含字母数字）、
            - 短信/邮件验证码（有效期5分钟，重试间隔60秒）、
            - 密码加密存储（采用bcrypt算法加盐哈希）；  
              登录支持"账号密码+验证码"双因素验证，实现密码找回（通过注册手机/邮箱重置），会话管理采用JWT令牌（有效期2小时，刷新机制）。
        - 图书展示与管理：  
          前端实现：
            - 列表页（分页展示，每页20条，支持排序：价格/出版日期）、
            - 详情页（展示图书信息、作者简介、目录、用户评价）；  
              后台管理功能：
            - 图书录入（支持单本添加、Excel批量导入）、
            - 信息编辑（修改价格、库存、封面图）、
            - 状态管理（上架/下架切换，下架商品前端隐藏）。
        - 购物车功能：  
          实现核心操作：
            - 添加（检查库存，超量提示最大可购数量）、
            - 修改（调整数量，实时更新小计金额）、
            - 删除（单个商品移除或清空购物车）；  
              价格计算逻辑：
            - 小计=单价×数量，总计=Σ小计（自动过滤下架/库存不足商品）；  
              数据存储采用"Redis缓存+数据库同步"，登录用户购物车持久化，游客购物车临时存储（localStorage），登录后合并。
        - 订单系统：  
          完整流程包含：
            - 订单创建（从购物车选品生成，锁定库存15分钟）、
            - 支付集成（对接支付宝、微信支付接口，支持扫码/跳转支付）、
            - 状态流转（待支付→已支付→发货中→已完成，支持取消订单、申请退款）；  
              订单信息包含：订单号（规则：年月日+随机6位数）、商品清单、收货地址、支付方式、物流信息（后期对接快递API）。

    - **第三阶段：功能完善（第5周：9月21日-9月28日）**
        - 分类筛选功能：  
          构建三级分类体系（如一级：文学；二级：小说；三级：科幻小说），支持多维度筛选：
            - 基础筛选（分类、价格区间、出版社）、
            - 高级筛选（ISBN、出版时间、是否有货）、
            - 搜索增强（关键词匹配书名/作者/ISBN，支持模糊查询）；  
              筛选结果页支持二次排序（销量/评分），响应时间要求≤200毫秒。
        - 用户评价系统：  
          功能包括：
            - 评价提交（购买用户可评，支持5星评分+100-500字文字评价+最多5张图片）、
            - 评价管理（后台审核，屏蔽违规内容，支持置顶优质评价）、
            - 评价展示（详情页按时间/ helpful数排序，显示评分分布雷达图）；  
              集成敏感词库（含政治、色情、辱骂类词汇），提交时实时过滤替换。
        - 购物车异常处理：  
          针对异常场景设计处理机制：
            - 库存不足：下单时检查，若库存减少，提示"当前库存××，已为您调整数量"；
            - 商品下架：登录时检测，自动移除下架商品并弹窗提示；
            - 价格变动：加载购物车时比对最新价格，提示"商品××价格调整为××，是否保留"。

    - **第四阶段：优化测试（第6周：10月5日-10月12日）**
        - 数据库性能优化：  
          优化方向：
            - 查询优化（重构慢查询SQL，避免SELECT *、嵌套子查询）、
            - 索引优化（为高频查询字段建索引：图书表title/author、订单表user_id/status）、
            - 分表策略（订单表按季度分表，历史数据归档）；  
              目标：单表查询响应≤100毫秒，联合查询≤200毫秒，支持日均10万条数据插入。
        - 页面加载优化：  
          前端优化手段：
            - 资源压缩（JS/CSS合并压缩，图片WebP格式转换，压缩率≥50%）、
            - 加载策略（首屏关键资源优先加载，非首屏图片懒加载，使用CDN加速静态资源）、
            - 缓存设置（静态资源设置长期缓存，接口数据局部缓存）；  
              目标：首页加载≤2秒，列表页≤1.5秒，详情页≤1.8秒。
        - 全面系统测试：  
          测试类型及覆盖范围：
            - 功能测试（35个需求点全覆盖，设计正向/反向用例）、
            - 性能测试（并发用户1000+，持续1小时，监控CPU/内存使用率、响应时间）、
            - 安全测试（SQL注入、XSS攻击、CSRF防护、权限越界检测）、
            - 兼容性测试（PC端：Chrome/Edge/Firefox/IE11；移动端：iOS/Android主流浏览器）。

    - **第五阶段：部署交付（第7周：10月12日-10月19日）**
        - 生产环境部署：  
          服务器架构：
            - 应用服务器（2台，4核8G，负载均衡）、
            - 数据库服务器（主从架构，主库写入，从库读取，数据同步延迟≤1秒）、
            - 缓存服务器（Redis集群，主从+哨兵，保证高可用）；  
              部署流程：
            - 环境配置（JDK11、MySQL8.0、Nginx1.21）、
            - 代码部署（通过Jenkins实现CI/CD，自动化构建部署）、
            - 安全配置（防火墙开放必要端口，HTTPS证书部署，禁用明文传输）。
        - 灰度测试：  
          测试方案：
            - 用户选取（随机抽取70名活跃用户，覆盖不同年龄段、使用设备）、
            - 测试周期（3天，每日监控关键指标）、
            - 指标跟踪（页面加载时间、操作成功率、支付转化率、用户反馈问题数）；  
              问题处理：每日汇总反馈，优先级P0/P1问题24小时内修复，P2问题纳入迭代计划。
        - 文档交付：  
          需交付文档包括：
            - 用户操作手册（注册登录、购书流程、评价管理等用户操作指南，配截图）、
            - 系统运维手册（服务器配置、日志查看、常见故障处理、数据备份恢复流程）、
            - 技术文档（系统架构图、数据库ER图、API接口文档、代码注释规范）；  
              文档格式为PDF+在线HTML，存放于团队知识库，支持全文检索。

2. **里程碑节点规划**
    - 里程碑1（第1周周日，9月14日）：完成基础框架搭建，输出《目录结构文档》《数据库设计说明书》《连接工具开发报告》，通过架构评审。
    - 里程碑2（第4周周日，9月28日）：完成核心功能开发，通过功能演示（用户登录、图书浏览、购物车操作、订单创建），核心流程无阻塞。
    - 里程碑3（第6周周日，10月12日）：完成系统优化测试，输出《性能测试报告》《安全测试报告》，性能指标达标，高优先级BUG清零。
    - 里程碑4（第7周周日，10月19日）：完成项目交付上线，生产环境稳定运行，灰度测试问题闭环，所有文档交付归档。


### 5.1.2实际完成情况
1. **整体进度概况**  
   22项计划任务全部完成（18项提前完成，4项按时完成），无延期任务。整体进度提前1.5天，进度偏差率-6.3%，处于可控范围。

2. **各阶段详细完成情况**
    - **第一阶段：基础搭建（9月7日-9月13日，提前1天）**
        - 目录结构设计：采用MVC架构，建立6个核心目录和12个子模块，代码组织清晰
        - 数据库设计：完成7张核心数据表（用户表、图书表等），12个外键关联确保数据一致性，5组索引优化查询
        - 连接工具开发：实现支持连接池的数据库操作工具类，封装15个基础CRUD方法，1000次压力测试无异常
    - **第二阶段：核心功能开发（9月14日-9月20日，平均提前1.5天）**
        - 用户登录/注册系统：支持邮箱和手机号注册，短信验证成功率99.8%，无安全漏洞
        - 图书展示与管理：列表页平均加载280毫秒，后台支持1500条数据批量操作
        - 购物车功能：100用户并发测试零误差，金额计算精度100%
        - 订单系统：创建成功率100%，实现待支付、已支付等6种状态完整流转
    - **第三阶段：功能完善（9月28日-10月4日，提前1天）**
        - 分类筛选功能：三级分类体系，多条件组合筛选，响应时间<150毫秒
        - 用户评价系统：支持文字和图片评价，敏感词过滤准确率99.7%
        - 购物车异常处理：实现库存实时检查，自动清理失效商品并提示用户
    - **第四阶段：优化测试（10月5日-10月11日，提前1天）**
        - 数据库性能优化：查询响应时间从300毫秒降至120毫秒，支持每秒200次并发查询
        - 页面加载优化：首页加载时间1.8秒，静态资源压缩率60%
        - 全面系统测试：执行300+测试用例，高优先级BUG修复率100%
    - **第五阶段：部署交付（10月12日-10月19日，按时完成）**
        - 生产环境部署：配置MySQL主从复制、负载均衡及HTTPS证书，确保数据安全
        - 灰度测试：70名用户参与，支付成功率99.6%，解决12个用户体验问题
        - 文档交付：完成用户操作手册、系统运维手册、测试报告3套文档


### 5.1.3（三）进度偏差分析
- 进度提前原因：技术选型合理、团队协作顺畅、前期设计充分、自动化工具提升效率
- 问题处理：第7周部署出现4小时服务器配置兼容问题，通过备用服务器方案解决，未影响交付时间


## 六、费用

### 6.1计划预算
1. **总预算构成**：27,200元，基于过往经验和市场行情，含风险与应急考量
2. **详细预算分配**
    - 开发人员成本：24,000元（88.2%）
        - 构成：5人（2后端+1前端+1测试+1项目经理）×400元/人天×12天，费率按资历与市场定
    - 服务器租赁费用：1,800元（6.6%）
        - 构成：300元/周×6周（含开发、预生产、生产环境），配置为4核8G、100G SSD、10M带宽
    - 域名与SSL证书费用：500元（1.8%）
        - 构成：.com域名88元（1年）+企业级OV证书412元（多子域名）
    - 第三方工具费用：600元（2.2%）
        - 含代码质量管理、API测试、性能监控工具，按熟悉度、功能、性价比选用
    - 其他杂费：300元（1.1%）
        - 含协作工具、文档打印等，遵循必要、合理、节约原则
3. **预算管理策略**：零基预算法，每项费用经论证审批，周更执行情况确保受控


### 6.2实际支出
1. **总支出情况**：25,218元，较预算节约1,982元，节约率7.3%
2. **各项费用执行情况**
    - 开发人员成本：22,800元（节约1,200元）
        - 节约原因：项目提前完成减少2人天工作量（省800元），抵消国庆加班增支400元
    - 服务器租赁费用：1,800元（与预算一致，周期、配置未降）
    - 域名与SSL证书费用：88元（节约412元，用阿里云免费SSL证书，256位加密达标）
    - 第三方工具费用：380元（节约220元，Postman免费版满足需求，选高性价比方案）
    - 其他杂费：150元（节约150元，严控支出，优先电子文档与免费协作平台）


### 6.3费用控制措施
- 资源优化：精细化任务分配、合理排期减加班、资源共享提利用率
- 采购控制：多方比价、优先开源/免费工具、集中采购争折扣
- 日常管理：定报销标准、电子化办公、定期审查调整

### 6.4成本效益分析
- 提前交付的时间价值  
- 高质量成果减少后期维护成本  
- 优化方案为后续项目积累经验  
- 团队能力提升降低未来培训成本  


# 六、问题与对策
| 问题分类         | 具体问题                       | 对策                                        |
|------------------|--------------------------------|---------------------------------------------|
| 错误处理         | 忽略函数返回错误，易导致问题排查困难 | 完善错误处理，记录错误日志，对用户返回友好提示|
| 输入验证         | 添加/更新图书时未严格校验输入合法性（如价格、库存为负数） | 前端添加表单验证，后端强化数据校验，过滤非法输入 |
| 会话安全         | 会话管理逻辑未明确过期策略，存在安全隐患 | 设置合理会话过期时间，配置`HttpOnly`、`Secure`等安全cookie属性 |
| 前端交互         | 图书删除、添加购物车等操作无防重复提交机制 | 提交后禁用按钮，或使用Token机制防止重复请求  |
| 分页逻辑         | 分页计算可能存在边界问题（如页码越界、总页数计算错误） | 优化分页算法，校验页码合法性，确保总页数计算包含余数情况 |
| 代码复用         | 图书分页查询（普通/价格筛选）存在重复逻辑 | 提取公共分页处理函数，减少代码冗余          |
| 数据库连接       | 未明确数据库连接池配置，可能存在连接泄露风险 | 配置合理连接池参数，确保连接正确关闭，避免资源占用过量 |
| 静态资源性能     | 静态资源（CSS、JS）无缓存策略，影响加载速度 | 添加缓存头（如`Cache-Control`），优化静态资源加载效率 |
| 前端样式管理     | CSS样式存在冗余，可能出现样式冲突 | 整理CSS代码，使用模块化命名规范，减少冗余样式 |
| 订单状态流转     | 订单状态判断逻辑简单，未完整覆盖状态流转场景| 设计完整订单状态机，强化状态流转校验，避免非法状态切换 |

# 七、基本信息

## 7.1需求方（甲方）
- **单位名称：** 北京数字阅读科技有限公司
- **法定代表人 / 授权代表：** 王芳
- **联系地址：** 北京市海淀区中关村大街 10 号
- **联系电话：** 010-12345678
- **电子邮箱：** wangfang@digitalreading.com
- **主要职责：**
  - 提供需求资料
  - 委派项目联系人
  - 及时评审成果
  - 支付款项
  - 提供开发测试环境支持
  - 配合用户培训等  
    （源自《软件开发合同》）

## 7.2开发方（乙方）
- **单位名称：** 404 回收站开发团队
- **法定代表人 / 授权代表：** 李泽雨
- **联系地址：** 北京市昌平区太行路 55 号
- **联系电话：** 130-5134-9753
- **电子邮箱：** 1958879729@qq.com
- **主要职责：**
  - 按需求开发系统
  - 委派项目经理
  - 提交交付物
  - 负责测试
  - 完成部署
  - 提供培训和技术支持
  - 保证知识产权合规等

# 八、验收人员

## 8.1需求方（甲方：北京数字阅读科技有限公司）
| 姓名   | 角色                | 职责                                                                 |
|--------|---------------------|----------------------------------------------------------------------|
| 王芳   | 法定代表人/授权代表 | 负责最终验收决策，审核项目是否符合合同约定的整体目标与交付标准         |
| （业务对接人） | 业务负责人          | 验证书城平台的业务流程（如用户注册、购书流程、支付链路）是否匹配需求，确认用户体验达标 |
| （技术对接人） | 技术负责人          | 审核系统架构、接口规范、数据安全等技术层面是否符合合同要求，验证性能指标（如响应速度、并发支持） |

## 8.2开发方（乙方：404回收站开发团队）
| 姓名  | 角色   | 职责                                                        |
|-----|------|-------------------------------------------------------------|
| 陈泓瑞 | 开发人员 | 提交项目交付物，解答验收方疑问，协调解决验收中发现的问题 |
| 何祎凡 | 开发人员 | 演示关键功能的技术实现，配合验证代码逻辑与功能完整性 |
| 王炳祺 | 开发人员 | 协助验证前端交互及后端接口调用的准确性|
| 傅宇驰 | 开发人员 | 提供测试报告、用户手册等文档支持，说明测试覆盖范围与缺陷修复情况 |

# 九、成果审查报告

# 十、问题处理

| 具体问题 | 处理方式（承接对策） | 处理结果 |
|----------|----------------------|----------|
| 忽略函数返回错误，易导致问题排查困难 | 完善错误处理逻辑，在关键函数添加try-catch捕获，集成日志系统记录错误详情，用户端返回标准化提示 | 错误场景可快速定位，用户端提示清晰，经多轮测试无错误遗漏，问题排查效率提升50% |
| 添加/更新图书时未严格校验输入合法性（如价格、库存为负数） | 前端表单添加正则与范围校验，后端接口增加参数合法性校验逻辑，过滤非法输入数据 | 非法输入（负价格、负库存等）均被拦截，数据入库准确，测试用例通过率100% |
| 会话管理逻辑未明确过期策略，存在安全隐患 | 配置会话过期时间为30分钟，添加`HttpOnly`、`Secure`等安全Cookie属性 | 经安全工具扫描，无会话劫持风险；用户会话超时后自动登出，安全性达标 |
| 图书删除、添加购物车等操作无防重复提交机制 | 关键操作按钮添加“提交后禁用”逻辑，核心接口引入Token机制校验请求唯一性 | 测试多次点击无重复操作，接口幂等性保障到位，功能稳定无异常 |
| 分页计算可能存在边界问题（如页码越界、总页数计算错误） | 优化分页算法，增加页码合法性校验，总页数计算包含余数场景 | 边界页码（第1页、最后一页）访问正常，总页数计算准确，分页功能全场景通过测试 |
| 图书分页查询（普通/价格筛选）存在重复逻辑 | 提取公共分页处理函数，封装通用查询逻辑，各模块统一调用 | 代码冗余减少30%，维护成本降低；分页功能一处修改全模块生效，扩展性提升 |
| 未明确数据库连接池配置，可能存在连接泄露风险 | 配置连接池最大连接数、超时时间等参数，确保连接使用后正确关闭 | 经压力测试（500并发）验证，无连接泄露；数据库资源占用合理，性能稳定 |
| 静态资源（CSS、JS）无缓存策略，影响加载速度 | 在Nginx配置`Cache-Control`缓存头，设置合理缓存时长 | 静态资源加载速度提升50%，浏览器调试可见缓存生效；页面首屏加载时间缩短2秒 |
| CSS样式存在冗余，可能出现样式冲突 | 整理CSS代码，采用BEM模块化命名规范，删除冗余样式规则 | 样式冲突问题解决，页面样式一致性达标；代码可读性提升，后续维护成本降低 |
| 订单状态判断逻辑简单，未完整覆盖状态流转场景（如重复发货、确认收货） | 设计完整订单状态机，定义各状态合法流转路径，强化状态切换校验逻辑 | 所有订单状态流转场景（待支付→已支付→已发货→已完成等）均合法，测试无非法状态跳转 |

# 十一、签字

| 角色        | 姓名  | 签字 | 日期             |
|-------------|-----|------|------------------|
| 需求方代表  | 王芳  |      | 2025 年 X 月 X 日 |
| 开发方项目经理 | 李泽雨 |      | 2025 年 X 月 X 日 |
| 开发方技术负责人 | 陈泓瑞 |      | 2025 年 X 月 X 日 |

# 十二、附件

## 12.1 开发合同
- **合同名称：** 《go 书城项目软件开发合同》
- **签订双方：**
  - 需求方（甲方）：北京数字阅读科技有限公司
  - 开发方（乙方）：404 回收站开发团队
- **合同期限：** 自 2025 年 X 月 X 日起至 2025 年 X 月 X 日止
- **核心条款：**
  - **项目范围：** 覆盖用户注册、图书浏览、购物车管理、订单全流程、支付等功能模块开发。
  - **权责约定：** 甲方负责需求确认、款项支付；乙方承担开发、测试、交付及技术支持义务。
  - **验收标准：** 功能匹配《需求规格说明书》，性能指标（接口响应≤3 秒、支持 100 + 并发）达标。
  - 
## 12.2 验收测试报告

### 12.2.1测试范围
### 图书管理模块
- **核心功能：** 图书添加、查询、更新、删除操作
- **扩展功能：** 分页查询、价格筛选、数据验证（正常/边界/异常数据处理）
- **层级测试：** 数据访问层（DAO）及控制器层（Controller）的交互逻辑

### 订单模块
- **核心功能：** 订单创建、状态管理、订单查询
- **性能测试：** 并发操作稳定性、高负载下系统响应
- **集成测试：** DAO层与Controller层的完整流程验证

### 登录流程模块
- **核心功能：** 登录成功/失败场景、注销功能、未登录状态访问控制
- **异常处理：** Session过期处理、并发登录验证

### 购物车模块
- **核心功能：** 商品添加（含重复添加）、数量更新、购物项删除、清空购物车
- **计算逻辑：** 购物车总价自动计算验证

### 12.2.2测试环境与工具
- **测试环境：** Windows系统
- **测试工具：**
  - 基础框架：Go标准库testing
  - HTTP测试：httptest、net/http
  - 辅助工具：url（URL编码）、fmt（字符串处理）
- **执行方式：** 通过自动化脚本`run_tests.bat`执行，支持单模块测试

### 12.2.3测试结果总结
| 验收指标 | 要求标准 | 结果 |
|---------|---------|------|
| 测试用例通过率 | 100% | 全部通过 |
| 关键功能覆盖率 | 100% | 达标 |
| 单元/集成测试覆盖率 | ≥80%/≥60% | 达标 |
| 性能与数据完整性 | 稳定无崩溃、数据无残留 | 达标 |

### 12.2.4验收结论
书店项目各核心模块的功能实现、性能表现及数据完整性均满足验收标准，所有测试用例100%通过，关键业务流程覆盖率达100%，符合项目质量要求。

**结论：** 通过验收测试，建议进入部署阶段。

## 12.2.5附件
- 《图书管理模块测试用例总结》
- 《订单模块测试总结》
- 《登录流程测试用例总结》
- 《购物车模块测试用例总结》

